smb pentesting 

smbclient -L <IP>

nmap -p 445 --script=smb-enum-shares.nse,smb-enum-users.nse 10.10.29.34

smbclient //<ip>/anonymous

smbget -R smb://<ip>/anonymous

nbtscan -r <ip> 

Use the MSF auxiliary module _auxiliary/scanner/smb/smb_version  or use script on hacktricks

searchsploit microsft smb
msf> search type:exploit platform:windows target:2008 smb

nmap --script "safe or smb-enum-*" -p 445 <IP>

rpcclient -U "" -N <IP> #No creds
rpcclient //machine.htb -U domain.local/USERNAME%754d87d42adabcca32bdb34a876cbffb  --pw-nt-hash
